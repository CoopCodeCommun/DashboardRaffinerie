{% load static %}
<tr>
    <td>
        <div class="d-flex px-2 py-1">
            {# Ici, c'est un peu plus complexe :)#}
            {# j'ai testé un lazy loading avec htmx. #}
            {# Si ça t'intéresse, je t'explique quand tu veux :) #}


            <div class="d-flex flex-column justify-content-center">
                <h6 class="mb-0 text-xs">{{ transaction.transaction_id }}</h6>
            </div>
        </div>
    </td>
    <td>
                <p class="text-xs text-secondary mb-0">{{ transaction.emitted_at }}</p>
    </td>
    <td>
        <p class="text-xs text-secondary mb-0">{{ transaction.amount }}</p>
    </td>
    <td>
        <p class="text-xs text-secondary mb-0">{{ transaction.label_fournisseur }}</p>
    </td>
    <td>
        <p class="text-xs text-secondary mb-0">{{ transaction.reference }}</p>
    </td>
    <td class="align-middle text-center text-sm">
        {% for badge in contact.badge.all %}
            <span class="badge badge-sm" style="background: {{ badge.color }}">{{ badge.reference }}</span>
        {% endfor %}
    </td>
    <td class="align-middle text-center">
        <span class="text-secondary text-xs font-weight-normal">{{ contact.adresse | default:"" }}</span>
    </td>
    <td class="align-middle">
        <a href="" class="text-secondary font-weight-normal text-xs"
           hx-get="/api/odoo_contacts/{{ contact.uuid }}/?modal=true"
           hx-target="#modals-here"
           hx-swap="innerHTML"
           hx-trigger="click"
           data-bs-toggle="modal"
           data-bs-target="#modals-here"
           hx-ext="loading-states"
           _="on click remove #modal_from_django"
        >
            <img src="{% static 'img/view-grid-detail.svg' %}" width="20">
        </a>
    </td>
    <td class="align-middle text-center">
        <img src="{% static 'img/edit.svg' %}" width="20" type="button"
             hx-trigger="edit"
             hx-get="/api/odoo_contacts/{{ contact.uuid }}/"
             hx-swap="outerHTML"
{#             hx-ext="loading-states"#}
             _="on click
                             if .editing is not empty
                               Swal.fire({title: 'Edition active',
                                          showCancelButton: true,
                                          confirmButtonText: 'Yep, Je continue!',
                                          text:'Hey! Vous êtes déja en édition, voulez vous continuer sur une nouvelle entrée?'})
                               if the result's isConfirmed is false
                                 halt
                               end
                               send cancel to .editing
                             end
                             trigger edit"/>
    </td>
</tr>